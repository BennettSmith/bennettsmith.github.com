
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>iDevelopSoftware</title>
  <meta name="author" content="Bennett Smith">

  
  <meta name="description" content="Class: Introduction to Qt Programming
Instructor: Robert Hartley (rhartley@ics.com) Send Robert an e-mail requesting a copy of the “C++
Programming &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.idevelopsoftware.com/blog/page/10/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="iDevelopSoftware" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<link href='http://fonts.googleapis.com/css?family=Oswald:300,400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Archivo+Narrow:400,400italic,700,700italic' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-38083118-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">iDevelopSoftware</a></h1>
  
    <h2>Simplicity and Clarity by Design</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.idevelopsoftware.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about/">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2005/07/notes-from-trolltech-developer-days-2005/">Notes From Trolltech Developer Days 2005</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-07-21T00:00:00-07:00" pubdate data-updated="true">Jul 21<span>st</span>, 2005</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Class: Introduction to Qt Programming<br/>
Instructor: Robert Hartley (rhartley@ics.com)</p>

<p>Send Robert an e-mail requesting a copy of the “C++<br/>
Programming for Qt” presentation.</p>

<p>Breakfast – Scientific Toolworks</p>

<p>Send e-mail asking for a copy of full week notes PDF file.</p>

<h1>Enhancement for Qt 4.1  </h1>

<p>Qt Designer 4.1 will have a menu editor and a toolbar<br/>
editor.</p>

<h1>Observation about QMake  </h1>

<p>People are confronting issues with their existing build<br/>
environments and how to integrate qmake into that. At least<br/>
one person indicated that he feels like it is necessary to<br/>
give up some of the nice things in qmake to use his build<br/>
system. Likewise, if he uses qmake then he gives up other<br/>
things that are relied upon as part of their environment.</p>

<h1>Possible Bug  </h1>

<p>Build the connect example.<br/>
Run it.<br/>
Maximize using the box in the upper right corner.<br/>
Double-click the caption bar to restore the regular size.<br/>
The window restores and then immediately maximizes again.<br/>
Then double-click again and it restores properly.<br/>
It should restore on the first double-click.</p>

<h1>Qt 4.1 Release  </h1>

<p>Expect a release by the end of the year.</p>

<h1>Whirlwind Tour through Qt  </h1>

<p>QWidget can be used as an invisible container for a group of<br/>
widgets.</p>

<p>No current replacement for a canvas. Use Q3Canvas for now.<br/>
There will be something new coming in Qt 4.1. (Scene Graph)</p>

<h1>Missing Widgets &amp; Components  </h1>

<p>No rfc822 e-mail components to manage messages or to talk<br/>
with POP3, IMAP, or SMTP servers.</p>

<p>No good “outlook bar”-like widget.</p>

<p>In general the look and feel of the widgets is like the old-<br/>
style windows controls. There does not appear to be any<br/>
support for the new Windows XP themes.</p>

<p>Toolbar support is weak. No indication of the drop zone for<br/>
the toolbar. It doesn’t float either. I’m also not sure if<br/>
the toolbar supports alpha-channel graphics like Windows XP.</p>

<h1>Book Update  </h1>

<p>A version of the book for Qt 4 will be available early next<br/>
year. It will be by the same authors.</p>

<h1>Missing Resources  </h1>

<p>Emphasis is on widgets for GUI design. It would be nice to<br/>
see topics like in the Petzold book that discuss the<br/>
fundamentals of the painting model, events, window<br/>
creation/lifetime, etc. There might be room for a book or<br/>
set of training materials on this. Something like the “MFC<br/>
Internals” book might also be nice to have. Event routing /<br/>
keyboard focus. These are mysterous also.</p>

<h1>Questions  </h1>

<p>Q. How can we route QActions to the proper destination. For<br/>
example, the Edit menu can contain actions for Copy, Cut,<br/>
and Paste. These operations should be routed to the<br/>
currently active widget. If the QActions are hooked up to<br/>
the main window they will not go to the correct destination.<br/>
I suppose you could remap the actions each time the focus<br/>
changes, but this sounds like a brute-force way to<br/>
accomplish this.</p>

<p>A.</p>

<p>Q. Does Qt have a font fallback mechanism?</p>

<p>A. Yes – this is provided by Qt directly since there is no<br/>
reliable fallback mechanism that works across all platforms.</p>

<p>Q.</p>

<h1>Global Event Filters  </h1>

<p>Shoot a Bug</p>

<p>Install a global event filter to dump object information.</p>

<p>// Place before call to app.exec();<br/>
qApp->installEventFilter(new ShootABug());</p>

<p>The Filter class</p>

<p>class ShootABug : public QObject<br/>
{<br/>
public:<br/>
virtual bool eventFilter(… recv …)<br/>
{<br/>
if (event->type() != QEvent::MouseButtonPress)<br/>
return false;<br/>
QMouseEvent* event = static_cats…<br/>
…</p>

<p>// Old way<br/>
qDebug() &lt;objectName().local8Bit();</p>

<p>// New way<br/>
qDebug() &lt;objectName());</p>

<p>qDebug() &lt;metaObject()->className();<br/>
qDebug() &lt;dumpObjectInfo();<br/>
qDebug() &lt;dumpObjectTree()<br/>
}</p>

<h1>repaint() is evil  </h1>

<p>Do not **ever** call repain() yourself. You should be<br/>
calling update() instead. It will handle painting properly<br/>
on all platforms. Update() will invalidate the entire region<br/>
of the widget.</p>

<h1>Visual Studio Debugger  </h1>

<p>Add to Common7\Packages\Debugger\Autoexp.dat to display<br/>
QString in the Visual Studio Debugger.</p>

<p>; from Qt<br/>
QString=data,su></p>

<h1>CEO “Key-note” Presentation  </h1>

<p>Minimize risks<br/>
Future-proof your efforts by using Qt<br/>
Support for Vista is being carefully followed.<br/>
Dual-license also helps minimize risks – source code is<br/>
always available.</p>

<p>All developers at Trolltech are “just like every other<br/>
developer” – they work in offices!</p>

<p>What happened in last 12 months?<br/>
* Grew from 80 to 140 people in 12 months<br/>
* Profitable<br/>
* Second round of funding<br/>
* Established China office<br/>
* Released Qt4</p>

<p>Qt 4 under development for 2 1/2 years.</p>

<p>Next 12 months – what to expect?<br/>
* Professional service organization<br/>
* Chief Technical Officer</p>

<p>Increasing demand for professional services is seen.<br/>
Trolltech is creating a professional services organization.</p>

<p>“Code Less. Create More” — don’t forget that developing<br/>
software should be fun. If development is feeling like a<br/>
slog through the mud then do something different.</p>

<p>Powerful frameworks will help — Qt is such a framework.</p>

<p>UI – Rich or Thin?<br/>
* “You can never be too rich or too thin”<br/>
* QT/COCO -<br/>
– Thin client technology for Qt<br/>
– Install any Qt application on a server<br/>
– Deploy thin, universal client in organization<br/>
– Targeted at enterprise deployment<br/>
– Prototype stage<br/>
– Amazing performance 10x faster than X</p>

<p>This seems kind of like their answer to .NET framework<br/>
ASP.NET thin clients or Java clients.</p>

<p>QT Java Technology<br/>
* Qt/Java bindings<br/>
* Lets java developers use Qt APIs from java env.<br/>
* Under development<br/>
* Prototype Q1 2006</p>

<p>Qtopia Update<br/>
- Defacto linux standard<br/>
- 85 manufactures building linux devices with qtopia<br/>
- 30 mobile phone man. building linux phones<br/>
- linux is a disruptive force in the handset industry<br/>
- trolltech goal: 100M phones by 2008</p>

<p>Qtopia 4 platform coming<br/>
Qtopia 4 Phone Edition PDA edition</p>

<p>What’s new in Qtopia 4?<br/>
- Rich feature set of Qt4<br/>
- Qtopia 4 highlights<br/>
– safe exec. environment – native sandboxing<br/>
– integrated SQL database on every device<br/>
– advanced graphics, themeing etc. to customize UI</p>

<p>=========================================================</p>

<p>Qt 4 and Beyond<br/>
Matthias Ettrich, VP Engineering</p>

<p>Qt History – 10 years of enabling cross-platform<br/>
- Issolate your code from operating system code.</p>

<p>Qt Evolution<br/>
- Mac is very active platform – driving some changes in Qt 4<br/>
- Vista – Avelon<br/>
- Office 12<br/>
- Linux – kde</p>

<p>Qt 4 Design Goals<br/>
- Enhanced capabilities<br/>
- Greater flexibility<br/>
- Solid foundation for future<br/>
- while retaining a large degree of comapatibility</p>

<p>Qt 4.0 – The good<br/>
- Cusomters and users value the new functionality<br/>
- Clean codebase allows us to turn around quickly<br/>
- Quick adoption in the Open source world<br/>
- Successful and fast ports from Qt 3</p>

<p>Qt 4.0 – The Not So Good<br/>
- A .0 release is a .0 release<br/>
- Some users expressed dissatisfaction with the performance<br/>
of certain painting operations<br/>
- qt3to4 and Qt3Support library partially failed to deliver<br/>
- Qt Designer lacked action editor</p>

<p>Qt 4.1 – The answers<br/>
- Many small bug fixes and imporovements, based on tcustomer<br/>
feedback (Task Tracker)<br/>
- Painting optimizations, including hadrware acceleration<br/>
using OpenGL<br/>
- Highly improved and extended Qt3Support module<br/>
- Enhanced Qt Designer with action editor</p>

<p>4.1 is nearing freeze now. Should be available sometime<br/>
after the Munich dev days event.</p>

<p>Qt 4.0 – Arthur<br/>
Can render SVG!<br/>
Can do native rendering to PDF also!</p>

<p>Qt 4.x Priorities<br/>
- Accomodating Microsoft Visat<br/>
– Scene-based graphics<br/>
- Improving Embedded and Mac<br/>
- Bug fixes, performance improvements<br/>
- Further improvements in At 3 ato Qt 4 migration experimnce<br/>
- New features according to customer needs</p>

<p>Examples<br/>
– Raising abstraction level for dialogs<br/>
– Desktop integration (local browers, local help system,<br/>
system tray, etc.)<br/>
– Higher main window abstraction (MDI, SDI abstraction for<br/>
example)<br/>
– More widgets<br/>
– Help system – framework for context help not there yet.<br/>
– Deployment issues – instalers<br/>
– Component model</p>

<p>THere are many many things they can do. Not sure which ones<br/>
they are actually going to address in Qt 4.x.</p>

<p>Q/A</p>

<ul>
<li>Some solutions not ported from Qt 3 to Qt 4</li>
<li>In Qt3 you could put widgets in a menu. In Qt 4 this is<br/>
not possible. in Qt 4 a more general approach is coming, but<br/>
not ready yet.</li>
</ul>


<p>=========================================================</p>

<p>3/4 billion hand-sets sold</p>

<p>productivity is key – need access to your data from portable<br/>
devices when/where you want.</p>

<p>Qtopia can help bring this level of access to consumers.</p>

<p>New mobile devices have significant headroom for doing other<br/>
things (beyond email/pim, sms, operating system, telephony).<br/>
This is important to recongize. Smart phones are going to be<br/>
very, very smart.</p>

<p>Expect VGA screens, video recorders, high-end audio, 3MP+<br/>
cameras, security, games, etc.</p>

<p>Development of enterprise applications that can run on these<br/>
devices.</p>

<h1>Designing for the Future  </h1>

<p>Things are getting more conneted (dhu!) Consumers expect<br/>
devices to be always connected. They will be smaller,<br/>
lighert, longer life. They will have more MIPS. Better,<br/>
faster, cheaper.</p>

<p>=========================================================</p>

<p>Qt @ Synopsys<br/>
How Synopsys Creates the Best GUIs in EDA</p>

<p>need to focus on how to create consistent (common) look&amp;feel<br/>
across applications becomes critical.</p>

<p>Distinguishes yourself.</p>

<p>Microsoft Office is an example of this. All pieces use<br/>
common UI idioms.</p>

<p>Overview<br/>
- Consolidation is Driving the Software Industry<br/>
- A Short Primer on Common Look and Feel<br/>
- How Synopsys Uses Qt to Achieve the Best GUIs in EDA</p>

<p>Consolidation in the Software Industry<br/>
- customer want less complexity<br/>
- don’t want to build their own mosaic<br/>
- don’t want to buy each title</p>

<p>There is demand for complete easy to use solutions</p>

<p>Prodblems Brought on by Consolidation<br/>
- Diverse appliations used together to solve a larger<br/>
problem.<br/>
S</p>

<p>What is Common Look &amp; Feel?<br/>
- Multiple Products working together.<br/>
– Example is Apple (iPod, iBook, mac mini) – They get<br/>
consistency for user experience<br/>
- Global Optimization for Common Tasks<br/>
– Adobe is a good example with the Creative Suite<br/>
of products. Color selection, layers, etc. are all<br/>
handled the same way. Learn once, apply everywhere.<br/>
- Conscious Commitment to Cross-Product Design<br/>
– Conscious application of systematic design methods to<br/>
a set of products, components, or modules so as to<br/>
maximize their mutual consistency and compatibility<br/>
with one another in support of the designated user and<br/>
task domain. It is the methodology through which<br/>
common look &amp; feel is achieved.</p>

<p>Synopsys<br/>
– Over 1600+ R&amp;D engineers<br/>
– Over 60 offices<br/>
– Over 350 account managers<br/>
– Over 1450+ applications engineers</p>

<p>System Design<br/>
Functional Verification<br/>
Synthesis<br/>
Physical Implementation<br/>
Manufacturing Prep.<br/>
IC Test</p>

<p>Driving Principals:<br/>
– Focus on product suites drive GUI convergence<br/>
– Complexity of IC design drives visual innovations</p>

<p>Background<br/>
– prior to 2001 used MFC for GUI development<br/>
– used porting packages to move to Unix</p>

<p>problems<br/>
– Stability, sensitive to OS patches, high support costs<br/>
– Extendibility , poor modularity and object-oriented<br/>
design<br/>
– not portible, no 64-bit support, no linux support<br/>
– performance, sluggish GUI and graphics performance</p>

<p>We had to find alternative technologies!</p>

<p>So, what GUI technology should we use?<br/>
– Java<br/>
– Motif<br/>
– Tcl/T<br/>
– Gnome<br/>
– Qt</p>

<p>Were excited about Java, but performance was a problem.</p>

<p>Qt was the solution!<br/>
- Performance<br/>
- Platform Support<br/>
- Compatibility C/C++<br/>
- Supply of Developers<br/>
- Object Oriented, modular, extendable<br/>
- Powerful Widgets<br/>
- Short Learning Curve<br/>
- Quality &amp; Support<br/>
- Long Future Lifetime</p>

<p>———-<br/>
How di Synopsys deliver common look &amp; feel?<br/>
- Created EDA specific GUI framework with Qt as the<br/>
foundation<br/>
- Reusable highlevel components &amp; plumbing<br/>
- Specialized centeral organization, distributed product<br/>
focus<br/>
- Requirements driven by products<br/>
- User centered design<br/>
- Structured development methodology.</p>

<p>Qt Components<br/>
- Windowing<br/>
- Tcl Console (they have scripting!)<br/>
- Menus/Toolbars<br/>
-Application Services</p>

<p>Synopsys GUI Organization<br/>
Pros:<br/>
- UI principles promoted from within product team<br/>
- UI reps maintain ties and loyalty to corporate goals<br/>
- UI reps can pull in outside expertise when needed</p>

<p>Cons:<br/>
- Requires maturity from management to resolve conflicts</p>

<p>Did it work? Yes!<br/>
- Gains in efficiency &amp; quality through code reuse<br/>
- Lots of commonality comes for free<br/>
- Designers have more time for unique problems<br/>
- Time to market shorter<br/>
- Common code is practially bullet proof</p>

<p>Qt quality enabled innovation in Visualization!</p>

<p>Feeling is that Synopsys offers superior visualization<br/>
technology for the EDA customer.</p>

<p>State of the art for chip designers hasn’t really changed<br/>
much. (VT100 then –> VT100 terminal emulator window now)</p>

<p>The Visual Information Seeking Mantra:<br/>
- Overview first,<br/>
- Zoom and filter,<br/>
- Then details-on-demand.”</p>

<p>Ben Shneiderman</p>

<p>Modern Screen resolution and graphics per. allow this.</p>

<p>Advantage of Qt<br/>
- Portable across multiple OS config.s<br/>
- High quality<br/>
- Powerful, flexible and extendable building blocks</p>

<p>Conclusion:</p>

<p>Qt provided Synopsys with a complete, high quality<br/>
foundation<br/>
Synopsys exploited Qt object oritned design<br/>
Resulting in:<br/>
– increased productivity and quality<br/>
– common look &amp; feel across product suites<br/>
– focus on innovative visualtiy</p>

<h1>Lunch Session  </h1>

<p>Scott Collins<br/>
scc@trolltech.com</p>

<p>User interface ideas</p>

<p>Put the user in control<br/>
- scriptability<br/>
- plug-ins<br/>
- emulation<br/>
- dynamic interface<br/>
– toolbars<br/>
– user assigned short-cuts<br/>
– user menus<br/>
– user dialogs</p>

<p>Think about the problem you are trying to solve in terms of<br/>
a language. Make it possible to express your solution. This<br/>
is a clarifying way to learn about the problem and solution.</p>

<p>Fit the user’s world<br/>
- import/export<br/>
- scriptability, nternal<br/>
- scriptability, external/system<br/>
- plug-ins<br/>
- special features of the OS</p>

<p>Make sure that the user can fit your application into their<br/>
world. Install/uninstall as expected on each OS. Use<br/>
desktop search capabilities to index your application data<br/>
on each platform (Spotlight on Mac, WinFS on Vista, Google<br/>
desktop Search?)</p>

<p>Use the Network<br/>
- check for updates<br/>
- report crashes<br/>
- on-line help<br/>
- collaboration<br/>
- information from the web</p>

<p>The user community – Transparency<br/>
- public forum<br/>
- public bug database<br/>
- public policies<br/>
– privacy<br/>
– security<br/>
– support<br/>
- blog</p>

<p>Consider Open Source<br/>
- Ccan it fit your licensing model<br/>
- can it fit your development model<br/>
- can you cross the chasm to community interests</p>

<p>Listening<br/>
- making it obvious<br/>
- making it easy<br/>
- what to do with input<br/>
- showing the user you’ve heard</p>

<p>We are good at creating develoment tools because we are the<br/>
users. Listen to the users and then any tool can be as good<br/>
as development tools. The users know what they want, but<br/>
sometimes they say things that are crap/wrong. You must<br/>
separate the good from the bad.</p>

<p>User not using just your program, but also using your<br/>
company. Establishing an on-going relationship with you and<br/>
your company. What you give them should reflect your<br/>
understanding that this is a partnership.</p>

<p>================================================</p>

<p>Threaded Programming – Good Practise<br/>
Andreas Aardal Hanssen</p>

<p>Handout contains examples of threading programming model.<br/>
Kind of like MVC, but for threading.</p>

<p>***| Latency is the enemy, concurrency is king.</p>

<p>Writing threadable code<br/>
- allow objects to live in separate threads, and to be<br/>
used from a different thread<br/>
- write reentrant (or thread-safe) code?<br/>
– preferably no statics<br/>
– standalone objects<br/>
- prefer “reentrancy” over thread-safety</p>

<p>Concurrency is Kin<br/>
- avoid locks where possible<br/>
- lock data, do not lock code<br/>
- free the lock as soon as possible</p>

<p>Lock data, not code<br/>
bad<br/>
mutex.lock()<br/>
words[0].append(“-example.txt”);<br/>
mutex.unlock();</p>

<p>good<br/>
mutex[0].lock();<br/>
words[0].append(“-example.txt”);<br/>
mutex[0].unlock();</p>

<p>Good Threading Models<br/>
- The lazy worker thread (P-C)<br/>
- The single-shot task thread<br/>
- The upside-down parser thread<br/>
- (The extra event loop thread)<br/>
- (The render-ahead thead)<br/>
- (Someone should write a book)</p>

<p>The single-shot task thread<br/>
- Gets job description from the constructor<br/>
- Performs the task immediately in run()<br/>
- Emits done() when done, then exits.</p>

<p>See handout: DataWriter::DataWriter(), Run()</p>

<p>Look up the thread-function adapter design pattern.</p>

<p>The upside-down parser thread<br/>
- A parser in the run() function<br/>
- Calls getChar(), blocks when out of data<br/>
- The parser is “fed” from the main thread through a<br/>
public feed() function<br/>
- Basically P-C in different wrapping</p>

<p>See handout: Tokenizer::feed(), getchar()</p>

<p>Check out QThreadStorage if you want to manage heap more<br/>
efficiently across threads.</p>

<p>===============================</p>

<p>Practical Model View Programming<br/>
Marius Bugge Monsen</p>

<p>Most slides are figures – difficult to take notes – ask for<br/>
a copy of the slides.</p>

<p>Qt 4.1 will have proxy models. This permits sorting and<br/>
filtering to be implemented easily on a per view basis<br/>
without effecting the source model.</p>

<p>In Qt 4.x (4.2 or some other future version) it could be<br/>
possible to aggregate multiple source models into a single<br/>
proxy model.</p>

<p>It would be nice to see an example of a sliding-window model<br/>
that handles looking at n items before/after the current<br/>
window of items. Not sure if this is possible. How would<br/>
this work with views that want to display all items? Is<br/>
there a way to know what the maximum number of items that<br/>
can be displayed in the view is? This would constrain how<br/>
much data must always be present in the sliding-window<br/>
model.</p>

<p>Qt 4.1 should probably be available in next 1-2 months.<br/>
Qt 4.2 is scheduled for late in the first 1/2 of 2006.</p>

<p>=======================================</p>

<p>Writing Plugin Applications with Qt<br/>
And Customizing Qt and Qt Designer</p>

<p>Qt 4 introduces a general framework for writing plugin<br/>
applicaitons</p>

<p>Examples<br/>
- plug &amp; paint applicaiton<br/>
- .cur image handler<br/>
- tic tac toe widget</p>

<p>Next year the offical trolltech Qt 4 book will come out.</p>

<p>Example of .pro file for qmake to build a plugin.</p>

<p>TEMPLATE=lib<br/>
CONFIG += plugin<br/>
INCLUDEPATH += ../..<br/>
HEADERS = …<br/>
SOURCES = …<br/>
TARGET = plugin_name<br/>
DESTDIR = ../../plugandpaint/plugins</p>

<p>No equivalent way to build a plugin from within Visual<br/>
Studio .NET (yet?)</p>

<p>=================================================</p>

<p>All About Widgets<br/>
The QWidget 4.1 API In Depth</p>

<p>QWidget’s API is complex<br/>
- 254 documented functions<br/>
- 53 properties</p>

<p>Many features are poorly understoon</p>

<p>Qt 4.1 introduces some new features:<br/>
- backing store<br/>
- application modality</p>

<p>Window Properties<br/>
- setWindowTitle<br/>
- setWindowIcon<br/>
- SetWindowIconText<br/>
- setWindowModified<br/>
- isWindow, window</p>

<p>No QWindow class – just some QWidgets are actually windows.<br/>
Functions with “window” in the name are for these “special”<br/>
widgets.</p>

<p>Window Flags</p>

<p>Influence the look/feel of the window<br/>
- only make sense for top-level widgets/windows<br/>
- consists of window type and zero or more hints</p>

<p>Widget Attributes<br/>
- boolean properties<br/>
- setWidgetAttribute(…)<br/>
- testWidgetAttribute(…)</p>

<p>examples of attributes….<br/>
- Delete on close<br/>
- Mac Metal style<br/>
- Hover<br/>
- Contents propagated</p>

<p>Widget Geometry</p>

<p>Q – Does window geometry handle multiple displays well?<br/>
Q – Does window geometry handle different dpi well? Looks<br/>
like arguments are specified in pixels.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/12/backup-mysql-database-on-windows-server-2003/">Backup MySQL Database on Windows Server 2003</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-12-04T00:00:00-08:00" pubdate data-updated="true">Dec 4<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ere are a couple scripts that I use to automatically backup a MySQL database on a Windows 2003 Server system.</p>

<p>The first script is called getdatetime.cmd. It is a reusable script to get the current date/time in some environment variables.</p>

<pre>@echo off

rem *******************************************************************
rem
rem Set environment variables with date/time information.
rem
rem DT_MONTH .................... Two digit month
rem DT_DAY ...................... Two digit day
rem DT_YEAR ..................... Four digit year
rem DT_HOUR ..................... Two digit hour
rem DT_MINUTE ................... Two digit minute
rem DT_SECOND ................... Two digit second
rem DT_RFC ...................... YYYYMMDDTHHMMSS
rem
rem *******************************************************************

rem Grab date and time values for conversion.

SET _CUR_DATE=%DATE%
SET _CUR_TIME=%TIME%

rem Convert from "Mon 10/27/2003" to individual parts by using a DOS FOR loop.

FOR /F "tokens=1-4 delims=/.- " %%a IN ("%_CUR_DATE%") DO SET DT_MONTH=%%b
FOR /F "tokens=1-4 delims=/.- " %%a IN ("%_CUR_DATE%") DO SET DT_DAY=%%c
FOR /F "tokens=1-4 delims=/.- " %%a IN ("%_CUR_DATE%") DO SET DT_YEAR=%%d

rem Convert from "11:40:12.82" to individual parts by using a DOS FOR loop.

FOR /F "tokens=1-4 delims=:." %%a IN ("%_CUR_TIME%") DO SET DT_HOUR=%%a
FOR /F "tokens=1-4 delims=:." %%a IN ("%_CUR_TIME%") DO SET DT_MINUTE=%%b
FOR /F "tokens=1-4 delims=:." %%a IN ("%_CUR_TIME%") DO SET DT_SECOND=%%c

SET DT_RFC=%YEAR%%MONTH%%DAY%T%HOUR%%MINUTE%%SECOND%
</pre>


<p>The second script does the actual work of backing up the database. It references the getdatetime.cmd script. Make sure you save both scripts in the same directory. I call this script nightly-backup.cmd, but you can call it anything you wish.</p>

<pre>@echo off
rem
rem Perform a backup of the MySQL database called mtblog.  This
rem is the database with the Movabletype web log data in it.
rem

rem Get date/time values
call GetDateTime.cmd
SET YEAR=%DT_YEAR%
SET MONTH=%DT_MONTH%
SET DAY=%DT_DAY%
SET HOUR=%DT_HOUR%
SET MINUTE=%DT_MINUTE%
SET SECOND=%DT_SECOND%

rem Figure out what the filename should be for this backup.
SET BACKUP_FILE=C:\MT-3.11-full-en_us\db-backups\mtblog-backup-%YEAR%%MONTH%%DAY%T%HOUR%%MINUTE%%SECOND%.sql

rem Perform the backup.
c:\mysql\bin\mysqldump --host=localhost --password=password --user=root mtblog &gt; %BACKUP_FILE%
</pre>


<p>Don’t forget to change the host, password, and user information on the last line of the script. You may also need to change the path to the mysqldump program if it is not under c:\mysql\bin on your system.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/07/environment-variables-provided-by-windows-operating-system/">Environment Variables Provided by Windows Operating System</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-07-23T00:00:00-07:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Microsoft assigns a type to each environment variable that is part of the environment block of a process. The possible types are System, User, Volatile and Process.</p>

<p>System
:   An environment variable that contains the same value for all processes running on the system, regardless of which user the process runs as. These are shared or global environment variables, and are defined in the system registry under the HKEY_LOCAL_MACHINE hive.</p>

<p>User
:   An environment variable that is specified for a particular user on the system. These are defined in the system registry as well, but are maintained under the HKEY_CURRENT_USER hive.</p>

<p>Volatile
:   An environment variable that is not persistent, and has a value that was assigned by the operating system based on some property of the system.</p>

<p>Process
:   An environment variable that is set only for a particular process. Often this would be set in the environment block by the parent process at the time the process is created. These are not persistent.</p>

<p>Additionally, the CMD.EXE command processor defines some dynamic environment variables that are assigned new values after each command is evaluated. These variables are volatile.</p>

<p>These tables were created by going through the on-line help for Windows 2000. I have listed all the volatile and dynamic environment variables I could find defined. There are probably more, and some of these may not be accurately documented.</p>

<table>
  <tr>
    <th colspan="2" align="center">
      Volatile Environment Variables
    </th>
  </tr>
  
  <tr>
    <th>
      Name
    </th>
    
    <th>
      Description
    </th>
  </tr>
  
  <tr>
    <td>
      ALLUSERSPROFILE
    </td>
    
    <td>
      Local – returns the location of the All Users Profile.
    </td>
  </tr>
  
  <tr>
    <td>
      APPDATA
    </td>
    
    <td>
      Local – returns the location where applications store data by default.
    </td>
  </tr>
  
  <tr>
    <td>
      COMPUTERNAME
    </td>
    
    <td>
      System – returns the name of the computer.
    </td>
  </tr>
  
  <tr>
    <td>
      HOMESHARE
    </td>
    
    <td>
      System – returns the network path to the user’s shared home directory. This variable is set based on the value of the home directory. The user’s home directory is specified in Local Users and Groups.
    </td>
  </tr>
  
  <tr>
    <td>
      LOGONSERVER
    </td>
    
    <td>
      Local – returns the name of the domain controller that validated the current logon session.
    </td>
  </tr>
  
  <tr>
    <td>
      USERDOMAIN
    </td>
    
    <td>
      Local – returns the name of the domain that contains the user’s account.
    </td>
  </tr>
  
  <tr>
    <td>
      USERNAME
    </td>
    
    <td>
      Local – returns the name of the user currently logged on.
    </td>
  </tr>
  
  <tr>
    <td>
      USERPROFILE
    </td>
    
    <td>
      Local – returns the location of the profile for the current user.
    </td>
  </tr>
  
  <tr>
    <td>
      NUMBER_OF_PROCESSORS
    </td>
    
    <td>
      Number of processors running on the machine.
    </td>
  </tr>
  
  <tr>
    <td>
      PROCESSOR_ARCHITECTURE
    </td>
    
    <td>
      Processor type of the user’s workstation.
    </td>
  </tr>
  
  <tr>
    <td>
      PROCESSOR_IDENTIFIER
    </td>
    
    <td>
      Processor ID of the user’s workstation.
    </td>
  </tr>
  
  <tr>
    <td>
      PROCESSOR_LEVE
    </td>
    
    <td>
      Processor level of the user’s workstation.
    </td>
  </tr>
  
  <tr>
    <td>
      PROCESSOR_REVISION
    </td>
    
    <td>
      Processor version of the user’s workstation.
    </td>
  </tr>
  
  <tr>
    <td>
      OS
    </td>
    
    <td>
      Operating system on the user’s workstation.
    </td>
  </tr>
  
  <tr>
    <td>
      COMSPEC
    </td>
    
    <td>
      Executable file for the command prompt (typically cmd.exe).
    </td>
  </tr>
  
  <tr>
    <td>
      HOMEDRIVE
    </td>
    
    <td>
      Primary local drive (typically the C drive).
    </td>
  </tr>
  
  <tr>
    <td>
      HOMEPATH
    </td>
    
    <td>
      Default directory for users (typically \users\default in Windows 2000).
    </td>
  </tr>
  
  <tr>
    <td>
      PATH
    </td>
    
    <td>
      PATH environment variable.
    </td>
  </tr>
  
  <tr>
    <td>
      PATHEXT
    </td>
    
    <td>
      Extensions for executable files (typically .com, .exe, .bat, or .cmd).
    </td>
  </tr>
  
  <tr>
    <td>
      PROMPT
    </td>
    
    <td>
      Command prompt (typically $P$G).
    </td>
  </tr>
  
  <tr>
    <td>
      SYSTEMDRIVE
    </td>
    
    <td>
      Local drive on which the system directory resides (typcially c:\).
    </td>
  </tr>
  
  <tr>
    <td>
      SYSTEMROOT
    </td>
    
    <td>
      System directory (for example, c:\winnt). This is the same as WINDIR.
    </td>
  </tr>
  
  <tr>
    <td>
      WINDIR
    </td>
    
    <td>
      System directory (for example, c:\winnt). This is the same as SYSTEMROOT.
    </td>
  </tr>
  
  <tr>
    <td>
      TEMP
    </td>
    
    <td>
      Directory for storing temporary files (for example, c:\temp).
    </td>
  </tr>
  
  <tr>
    <td>
      TMP
    </td>
    
    <td>
      Directory for storing temporary files (for example, c:\temp).
    </td>
  </tr>
</table>




<table>
  <tr>
    <th colspan="2" align="center">
      Dynamic Environment Variables
    </th>
  </tr>
  
  <tr>
    <th>
      Name
    </th>
    
    <th>
      Description
    </th>
  </tr>
  
  <tr>
    <td>
      CD
    </td>
    
    <td>
      Expands to the current directory.
    </td>
  </tr>
  
  <tr>
    <td>
      DATE
    </td>
    
    <td>
      Expands to the same output as typing DATE.
    </td>
  </tr>
  
  <tr>
    <td>
      TIME
    </td>
    
    <td>
      Expands to the same output as typing TIME.
    </td>
  </tr>
  
  <tr>
    <td>
      RANDOM
    </td>
    
    <td>
      Generates a random integer in the range of 0 – 32767.
    </td>
  </tr>
  
  <tr>
    <td>
      ERRORLEVEL
    </td>
    
    <td>
      Expands to the current ERRORLEVEL.
    </td>
  </tr>
  
  <tr>
    <td>
      CMDEXTVERSION</td <td>
        Expands to the current Command Processor Extensions version number.
      </td></tr> 
      
      <tr>
        <td>
          CMDCMDLINE
        </td>
        
        <td>
          Expands to the original command line that invoked the Command Processor.
        </td>
      </tr></table>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/07/path-environment-variable-limitations-in-windows/">PATH Environment Variable Limitations in Windows</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-07-14T00:00:00-07:00" pubdate data-updated="true">Jul 14<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Environment variables are managed using the System control panel applet in Windows. This user interface leaves much to be desired, but it works. Environment variables are separated into “System” and “User” categories. All users that may login on a machine share the System environment variables. Each user has her own set of User environment variables. User environment variables take precedence over System environment variables. How this precedence rule effects variable definitions is illustrated in the following example:</p>

<p>If the variable TEMP Generally speaking, if an environment variable appears in both categories then the value associated with the User environment variable will be used.</p>

<p>The PATH environment variable controls how the operating system searches for executable (EXE) and dynamic link library (DLL) files when asked to run an application. Some applications are installed for use by all users of the system and others are installed for exclusive use of a particular user.</p>

<p>Microsoft publishes some great human factors guidelines for building Windows applications. I sure wish they would follow some of these guidelines for the Control Panel applets that are provided with Windows. If these applets had to go through the logo certification process I’m sure they would fail!</p>

<p>Take for example the environment variable editing dialog box in the System applet.</p>

<p><a href="http://www.flickr.com/photos/49807087@N00/2319758559" title="View 'EnvironmentVariables-thumb' on Flickr.com"><img src="http://farm3.static.flickr.com/2018/2319758559_8f6f8596b9_o.jpg" alt="EnvironmentVariables-thumb" border="0" width="250" height="231" /></a></p>

<p>This is a prefect example of what not to do when building a user interface. I hate editing environment variables using a one line edit box where you can’t even see the whole definition of the value. You can’t even resize the dialog box!</p>

<p>To make matters worse, there are limits imposed by the operating system that are not checked in the user interface. The PATH environment variable cannot exceed 1024 characters in length, but the user interface happily allows you to define a PATH that is way longer than this.</p>

<p>You can try this for yourself by defining a System PATH that is about 512 bytes in length and define a User PATH that is about 600 bytes long. Because the combine System+User PATH is longer than 1024 bytes the operating system decides to only use the System PATH, leaving out all your User PATH assignments.</p>

<p>A good user environment variable editor would check for this sort of thing. Since Microsoft doesn’t need to get their applications “logo certified” they can freely ignore the UI guidelines they publish. What a shame!</p>

<p>I looked into what it would take to create my own Control Panel Applet to replace this environment variable editor and it looks straight forward. Keep tuned, and maybe I’ll post an improved editor here.</p>

<p>As I dig further into this environment variable issue it seems like there is a lot of inconsistency between versions of Windows.</p>

<p>Microsoft has some <a href="http://technet.microsoft.com/en-us/library/bb490998.aspx">information</a> on the NT command prompt for Windows XP that says the maximum environment variable size is 8192 bytes and that the entire environment cannot exceed 65,536KB (though I think that is supposed to be bytes).</p>

<p>Early versions of MS-DOS had a 128 character limitation on the PATH variable. According to this <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;97595">article</a>, that limitation was removed in MS-DOS 6.0. In <a href="http://support.microsoft.com/default.aspx?scid=kb;EN-US;169171">KB169171</a> Microsoft talks about how 16-bit applications can still hang when the path exceeds 200 bytes.</p>

<p>The only place I could find that actually states that there is a 1KB limit on the combine length of the System+User path is <a href="http://support.microsoft.com/default.aspx?scid=kb;en-us;216477">here</a>. In the WORKAROUND section of this article it states that the path should “total 1 KB or less of characters”. The article is for Windows NT Server 4.0 Terminal Server Edition, but my experiments on a Windows 2000 Professional system indicate that it is still the case. I haven’t tried Windows XP or Windows Server 2003 yet to determine if the problem exists in those variants of Windows.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2004/01/introduction-to-xml/">Introduction to XML</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2004-01-15T00:00:00-08:00" pubdate data-updated="true">Jan 15<span>th</span>, 2004</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently taught a short seminar at UC Santa Cruz Extension to introduce students to XML and all the good things it can be used for.  The materials from the seminar are available here.</p>

<ul>
<li><a href="http://idvlpsw.files.wordpress.com/2008/03/introduction-to-xml-handout.pdf" title="Introduction to XML - Handout">Introduction to XML - Handout</a></li>
<li><a href="http://idvlpsw.files.wordpress.com/2008/03/introduction-to-xml-presentation.pdf" title="Introduction to XML - Presentation">Introduction to XML - Presentation</a><a href="http://idvlpsw.files.wordpress.com/2008/03/introduction-to-xml-presentation.pdf" title="Introduction to XML - Presentation"></a></li>
</ul>

</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/01/29/plugin-experiments/">Plugin Experiments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/01/29/code-blocks/">Code Blocks</a>
      </li>
    
      <li class="post">
        <a href="/2011/12/comcast-support-problems-surfboard-sbg6580-intermittent-connection-loss/
/">Comcast Support Problems &#8211; SURFboard SBG6580 &#8211; Intermittent Connection Loss</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/capturing-airport-extreme-log-with-lion-server-syslog/">Capturing AirPort Extreme Log with Lion Server Syslog</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/cookbook-snow-leopard-rvm-ruby-on-rails/">Cookbook: Snow Leopard, RVM, Ruby on Rails</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/BennettSmith">@BennettSmith</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'BennettSmith',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("BennettSmith", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/BennettSmith" class="twitter-follow-button" data-show-count="false">Follow @BennettSmith</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Bennett Smith -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'idevelopsoftware';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
